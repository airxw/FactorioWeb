# Factorio Server Pro - ä»£ç è§„èŒƒæ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [ä»£ç ç»“æ„](#ä»£ç ç»“æ„)
3. [PHP è§„èŒƒ](#php-è§„èŒƒ)
4. [JavaScript è§„èŒƒ](#javascript-è§„èŒƒ)
5. [HTML/CSS è§„èŒƒ](#htmlcss-è§„èŒƒ)
6. [Git æäº¤è§„èŒƒ](#git-æäº¤è§„èŒƒ)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç»“æ„
```
factorio/
â”œâ”€â”€ bin/              # Factorio å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ data/             # æ¸¸æˆæ•°æ®
â”œâ”€â”€ web/              # Web ç®¡ç†é¢æ¿ (æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ api.php       # API å…¥å£
â”‚   â”œâ”€â”€ auth.php      # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ config.php    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html    # ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ login.html    # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ password-tool.html # å¯†ç å·¥å…·
â”‚   â””â”€â”€ static/       # é™æ€èµ„æº
â””â”€â”€ server/           # æœåŠ¡å™¨æ•°æ®
```

### æŠ€æœ¯æ ˆ
- **åç«¯**: PHP 7.0+
- **å‰ç«¯**: HTML5 + CSS3 + JavaScript (ES6+)
- **UI æ¡†æ¶**: Bootstrap 5
- **ç»ˆç«¯**: xterm.js
- **å›¾æ ‡**: Bootstrap Icons (SVG)

---

## ä»£ç ç»“æ„

### æ–‡ä»¶å‘½åè§„èŒƒ
- **PHP æ–‡ä»¶**: å°å†™ + ä¸‹åˆ’çº¿ï¼Œå¦‚ `auth.php`, `api.php`
- **HTML æ–‡ä»¶**: å°å†™ + è¿å­—ç¬¦ï¼Œå¦‚ `login.html`, `password-tool.html`
- **CSS/JS**: å°å†™ + è¿å­—ç¬¦ï¼Œå¦‚ `app.css`, `main.js`
- **ç›®å½•**: å°å†™ï¼Œå¦‚ `static/`, `lib/`

### ç›®å½•ç»„ç»‡
```
web/
â”œâ”€â”€ *.php              # PHP åç«¯æ–‡ä»¶
â”œâ”€â”€ *.html             # HTML é¡µé¢
â”œâ”€â”€ static/            # é™æ€èµ„æº
â”‚   â”œâ”€â”€ js/            # JavaScript
â”‚   â”œâ”€â”€ css/           # CSS
â”‚   â””â”€â”€ lib/           # ç¬¬ä¸‰æ–¹åº“
â””â”€â”€ Workerman/         # ç¬¬ä¸‰æ–¹ PHP åº“
```

---

## PHP è§„èŒƒ

### æ–‡ä»¶å¤´æ³¨é‡Š
æ‰€æœ‰ PHP æ–‡ä»¶å¿…é¡»åŒ…å«æ–‡ä»¶å¤´æ³¨é‡Šï¼š
```php
<?php
/**
 * æ–‡ä»¶å - ç®€è¦æè¿°
 * 
 * åŠŸèƒ½è¯´æ˜:
 * - åŠŸèƒ½1
 * - åŠŸèƒ½2
 *
 * @package FactorioServerPro
 * @version 2.0
 * @author Factorio Server Pro Team
 */
```

### ä»£ç é£æ ¼
- **ç¼©è¿›**: 4 ä¸ªç©ºæ ¼ï¼ˆä¸è¦ç”¨ Tabï¼‰
- **è¡Œå®½**: æœ€å¤§ 120 å­—ç¬¦
- **æ¢è¡Œ**: Unix é£æ ¼ (\n)
- **ç¼–ç **: UTF-8 (æ—  BOM)

### å‘½åçº¦å®š
| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| ç±»å | PascalCase | `UserManager` |
| å‡½æ•°å | camelCase | `handleLogin()` |
| å˜é‡å | camelCase | `$userName` |
| å¸¸é‡ | UPPER_SNAKE_CASE | `MAX_UPLOAD_SIZE` |
| ç§æœ‰æˆå‘˜ | _camelCase | `$_internalData` |

### å‡½æ•°æ³¨é‡Š
æ‰€æœ‰å…¬å…±å‡½æ•°å¿…é¡»åŒ…å« PHPDoc æ³¨é‡Šï¼š
```php
/**
 * å¤„ç†ç”¨æˆ·ç™»å½•
 * 
 * @param string $username ç”¨æˆ·å
 * @param string $password å¯†ç 
 * @return array ç™»å½•ç»“æœ ['success' => bool, 'error' => string, 'user' => array]
 */
function handleLogin($username, $password) {
    // å®ç°...
}
```

### æ§åˆ¶ç»“æ„
```php
// if è¯­å¥
if ($condition) {
    // ä»£ç 
} elseif ($otherCondition) {
    // ä»£ç 
} else {
    // ä»£ç 
}

// switch è¯­å¥
switch ($action) {
    case 'login':
        handleLogin();
        break;
    case 'logout':
        handleLogout();
        break;
    default:
        // é»˜è®¤
}

// æ•°ç»„
$array = [
    'key1' => 'value1',
    'key2' => 'value2',
];
```

### é”™è¯¯å¤„ç†
```php
// ä½¿ç”¨å¼‚å¸¸æˆ–é”™è¯¯è¿”å›
try {
    // ä»£ç 
} catch (Exception $e) {
    error_log($e->getMessage());
    echo json_encode(['error' => 'æ“ä½œå¤±è´¥']);
}
```

### å®‰å…¨æœ€ä½³å®è·µ
1. **è¾“å…¥éªŒè¯**: æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·è¾“å…¥
2. **SQL æ³¨å…¥**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆæœ¬é¡¹ç›®æ— æ•°æ®åº“ï¼‰
3. **XSS é˜²æŠ¤**: è¾“å‡ºæ—¶ä½¿ç”¨ `htmlspecialchars()`
4. **CSRF é˜²æŠ¤**: éªŒè¯è¯·æ±‚æ¥æº
5. **å¯†ç å­˜å‚¨**: ä½¿ç”¨ `password_hash()` å’Œ `password_verify()`

---

## JavaScript è§„èŒƒ

### ä»£ç é£æ ¼
- **ç¼©è¿›**: 4 ä¸ªç©ºæ ¼
- **åˆ†å·**: å¿…é¡»ä½¿ç”¨åˆ†å·
- **å¼•å·**: å•å¼•å·ä¼˜å…ˆï¼Œå­—ç¬¦ä¸²åŒ…å«å•å¼•å·æ—¶ç”¨åŒå¼•å·
- **å˜é‡å£°æ˜**: ä¼˜å…ˆä½¿ç”¨ `const`ï¼Œå…¶æ¬¡ `let`ï¼Œé¿å… `var`

### å‘½åçº¦å®š
| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| å˜é‡/å‡½æ•° | camelCase | `userName`, `handleLogin()` |
| å¸¸é‡ | UPPER_SNAKE_CASE | `MAX_FILE_SIZE` |
| ç±»å | PascalCase | `UserManager` |
| ç§æœ‰æˆå‘˜ | _camelCase | `_internalState` |

### å‡½æ•°æ³¨é‡Š
```javascript
/**
 * æ£€æŸ¥ç”¨æˆ·è®¤è¯çŠ¶æ€
 * 
 * @returns {Promise<boolean>} æ˜¯å¦å·²è®¤è¯
 */
async function checkAuth() {
    // å®ç°...
}
```

### äº‹ä»¶å¤„ç†
```javascript
// ä½¿ç”¨ addEventListener
document.getElementById('btn').addEventListener('click', (e) => {
    e.preventDefault();
    // å¤„ç†
});

// æˆ–è€…ä½¿ç”¨å‘½åå‡½æ•°
function handleClick(e) {
    e.preventDefault();
}
document.getElementById('btn').addEventListener('click', handleClick);
```

### å¼‚æ­¥ç¼–ç¨‹
```javascript
// ä½¿ç”¨ async/await
async function fetchData() {
    try {
        const response = await fetch('/api.php');
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error:', error);
        throw error;
    }
}
```

---

## HTML/CSS è§„èŒƒ

### HTML ç»“æ„
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡µé¢æ ‡é¢˜</title>
</head>
<body>
    <!-- å†…å®¹ -->
</body>
</html>
```

### è¯­ä¹‰åŒ–æ ‡ç­¾
- ä½¿ç”¨ `<header>`, `<nav>`, `<main>`, `<section>`, `<footer>`
- è¡¨å•ä½¿ç”¨ `<label>` å…³è”è¾“å…¥
- æŒ‰é’®ä½¿ç”¨ `<button>` è€Œé `<div>`

### CSS è§„èŒƒ
- **ç¼©è¿›**: 4 ä¸ªç©ºæ ¼
- **é€‰æ‹©å™¨**: ç±»é€‰æ‹©å™¨ä¼˜å…ˆï¼Œé¿å… ID é€‰æ‹©å™¨
- **å±æ€§é¡ºåº**: å¸ƒå±€ â†’ ç›’æ¨¡å‹ â†’ æ’ç‰ˆ â†’ è§†è§‰
- **é¢œè‰²**: ä½¿ç”¨ CSS å˜é‡å®šä¹‰ä¸»é¢˜è‰²

```css
/* å¥½çš„ç¤ºä¾‹ */
:root {
    --primary-color: #3b82f6;
    --border-radius: 8px;
}

.card {
    display: flex;
    flex-direction: column;
    padding: 16px;
    border-radius: var(--border-radius);
    background: #fff;
    color: #333;
}
```

### å“åº”å¼è®¾è®¡
```css
/* ç§»åŠ¨ä¼˜å…ˆ */
.container {
    width: 100%;
}

/* å¹³æ¿ */
@media (min-width: 768px) {
    .container {
        width: 750px;
    }
}

/* æ¡Œé¢ */
@media (min-width: 1200px) {
    .container {
        width: 1140px;
    }
}
```

---

## Git æäº¤è§„èŒƒ

### æäº¤ä¿¡æ¯æ ¼å¼
```
<ç±»å‹>(<èŒƒå›´>): <ä¸»é¢˜>

<æ­£æ–‡>

<é¡µè„š>
```

### ç±»å‹
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·ç›¸å…³

### ç¤ºä¾‹
```
feat(auth): æ·»åŠ ç™»å½•ç³»ç»Ÿ

- å®ç° login.html
- æ·»åŠ  auth.php è®¤è¯æ¨¡å—
- é›†æˆä¼šè¯ç®¡ç†

Closes #123
```

---

## æœ€ä½³å®è·µ

### æ€§èƒ½ä¼˜åŒ–
1. **PHP**: é¿å…åœ¨å¾ªç¯ä¸­è¿›è¡Œæ•°æ®åº“/æ–‡ä»¶æ“ä½œ
2. **JavaScript**: ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå‡å°‘ DOM æ“ä½œ
3. **CSS**: é¿å…è¿‡åº¦ä½¿ç”¨ `!important`ï¼Œä¼˜åŒ–é€‰æ‹©å™¨
4. **å›¾ç‰‡**: ä½¿ç”¨ SVG å›¾æ ‡ï¼Œæ‡’åŠ è½½å›¾ç‰‡

### å¯ç»´æŠ¤æ€§
1. **DRY åŸåˆ™**: ä¸è¦é‡å¤ä»£ç 
2. **å•ä¸€èŒè´£**: æ¯ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹
3. **æ³¨é‡Š**: ä»£ç ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œè€Œä¸æ˜¯åšäº†ä»€ä¹ˆ
4. **ç‰ˆæœ¬æ§åˆ¶**: å°æ­¥æäº¤ï¼Œé¢‘ç¹æäº¤

### å¯è®¿é—®æ€§
1. **è¯­ä¹‰åŒ– HTML**: ä½¿ç”¨æ­£ç¡®çš„ HTML æ ‡ç­¾
2. **é”®ç›˜å¯¼èˆª**: ç¡®ä¿æ‰€æœ‰åŠŸèƒ½å¯ç”¨é”®ç›˜æ“ä½œ
3. **é¢œè‰²å¯¹æ¯”åº¦**: æ»¡è¶³ WCAG æ ‡å‡†
4. **å›¾ç‰‡æ›¿ä»£æ–‡æœ¬**: ä¸ºå›¾ç‰‡æä¾› alt å±æ€§

---

## å·¥å…·æ¨è

### ä»£ç æ ¼å¼åŒ–
- **PHP**: PHP-CS-Fixer
- **JavaScript**: Prettier, ESLint
- **CSS**: Stylelint

### ç¼–è¾‘å™¨é…ç½®
æ¨èä½¿ç”¨ VS Code é…åˆä»¥ä¸‹æ’ä»¶ï¼š
- PHP Intelephense
- ESLint
- Prettier
- EditorConfig

---

*æœ€åæ›´æ–°: 2026å¹´2æœˆ19æ—¥*
*ç‰ˆæœ¬: 2.0*
